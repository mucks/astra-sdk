<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Astra SDK: Tutorials</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-l-en.png" height="44"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><span style="font-family:Georgia">Astra SDK</span>
   &#160;<span id="projectnumber", style="font-family:Georgia">v2.0.19</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorials </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Time</b> Required: ~10 minutes</p>
<p>Want to get a taste of our SDK before diving deeper? Then let's get our hands dirty and write some code!</p>
<p>By the end of this tutorials you should be familiar with:</p>
<ul>
<li>Proper initialization and termination of the SDK</li>
<li>Reading data from the sensor</li>
<li>Examining the depth information provided by the <a class="el" href="namespace_astra.html">Astra</a>'s depth camera</li>
</ul>
<h1><a class="anchor" id="tutorials_begin"></a>
Before We Begin</h1>
<p>If you skipped over the section where we install the SDK and build the sample applications provided by the SDK, make sure you've at least downloaded and extracted <a class="el" href="namespace_astra.html">Astra</a> to a folder you can easily access.</p>
<h1><a class="anchor" id="tutorials_getting"></a>
Getting Down to Business!</h1>
<p>Our first step will be to set up a basic application as a starting point for progressively adding new functionality.</p>
<ol type="1">
<li>Using your favorite IDE, set up a new console application project and create a new source file called "main.cpp".</li>
<li>Copy the following into your main.cpp file:</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;astra/astra.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;cstdio&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><ul>
<li>Line 1 - <a class="el" href="astra_8hpp_source.html">astra.hpp</a> must be included in all applications. It is the core of <a class="el" href="namespace_astra.html">Astra</a> and is required for all C++ based <a class="el" href="namespace_astra.html">Astra</a> applications.</li>
<li>Lines 9-10 - We'll use <code>std::cin.get() &lt;<a href="http://en.cppreference.com/w/cpp/io/basic_istream/get">http://en.cppreference.com/w/cpp/io/basic_istream/get</a>&gt;</code>_ to make sure we have an opportunity to see our handiwork before our application closes its window.</li>
</ul>
<h1><a class="anchor" id="init_term_sec"></a>
Initializing and Terminating Astra</h1>
<p>To prepare <a class="el" href="namespace_astra.html">Astra</a> to do our bidding, we must first initialize <a class="el" href="namespace_astra.html">Astra</a>, which is unsurprisingly done via the <code>initialize</code> function. When we're ready to end our session with the SDK, we then need to give <a class="el" href="namespace_astra.html">Astra</a> an opportunity to cleanly shutdown. This is accomplished by calling the <code>terminate</code> function, which will, among other things, properly turn off attached devices.</p>
<p>Add the two new lines below:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga75bdfca558a77a83cfe142596a81f859">astra::initialize</a>();</div><div class="line"></div><div class="line">   <span class="comment">// what will go here? you&#39;ll find out soon!</span></div><div class="line"></div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga154632f199b1df85a9fc90687205f4fe">astra::terminate</a>();</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="trust_sec"></a>
Trust But Verify</h1>
<p>Before we get ahead of ourselves, let's take a moment to make sure that everything is as we expect it. Compile and run the application. The application should start up, print out a series of diagnostic messages to the console, and then patiently wait for you to press the "Enter" key. Once pressed, the application should gracefully exit.</p>
<dl class="section attention"><dt>Attention</dt><dd><a class="el" href="namespace_astra.html">Astra</a> by default logs a fair amount of diagnostic information to the console. If you do run into an issue, this can be a great place to start looking for answers.</dd></dl>
<p>Next up: Talking to <a class="el" href="namespace_astra.html">Astra</a>.</p>
<h1><a class="anchor" id="connect_sec"></a>
Connecting to the Astra</h1>
<p>Now that we know how to properly initialize and terminate <a class="el" href="namespace_astra.html">Astra</a>, it's time to actually communicate with the <a class="el" href="namespace_astra.html">Astra</a> sensor. For this, we use the <code>StreamSet</code> class, which broadly encapsulates the idea of a group of related data sources (think: video and audio from a 2D video camera). For now, however, it's sufficient to think of a streamSet as a physical device like the <a class="el" href="namespace_astra.html">Astra</a>, and the <code>StreamSet</code> class, your portal to its functionality.</p>
<p>Between our initialization and termination bookends, let's declare a <code>StreamSet</code> variable.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga75bdfca558a77a83cfe142596a81f859">astra::initialize</a>();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_stream_set.html">astra::StreamSet</a> streamSet;</div><div class="line"></div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga154632f199b1df85a9fc90687205f4fe">astra::terminate</a>();</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>Now, sure, this seems like a small addition from our previous step, but this line is more significant than it appears. Just by declaring and constructing a <code>StreamSet</code> object, you are instructing <a class="el" href="namespace_astra.html">Astra</a> to start the process of connecting to the first available <a class="el" href="namespace_astra.html">Astra</a> sensor it can locate. Cool, right?</p>
<dl class="section attention"><dt>Attention</dt><dd><a class="el" href="namespace_astra.html">Astra</a> provides an additional constructor that will allow you to connect to a specific <a class="el" href="namespace_astra.html">Astra</a> sensor.</dd></dl>
<p>Now that we're connected, we're ready to do what we came here to do - see through the eyes of the Astra!</p>
<h1><a class="anchor" id="retrive_sec"></a>
Retrieving Sensor Data</h1>
<p>Time to put our <code>StreamSet</code> object to good use and get some data. To do this, we'll need to read one of the streams that the <a class="el" href="namespace_astra.html">Astra</a> is providing. Streams contain the data coming from our camera packaged in packets of data called "frames". <a class="el" href="namespace_astra.html">Astra</a> currently supports a number of types of streams, including depth, color, hand, and point streams.</p>
<p>In order to access streams from the <a class="el" href="namespace_astra.html">Astra</a> and get to the frames, we'll need a <code>StreamReader</code> to tap into one of the streams. For the purposes of our application,we're going to focus on the depth stream. This stream gives us the distances of anything that our camera sees in pixels, and those pixels are packaged in a frame.</p>
<ol type="1">
<li>First, let's create a <code>StreamReader</code> using our <code>StreamSet</code>.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga75bdfca558a77a83cfe142596a81f859">astra::initialize</a>();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_stream_set.html">astra::StreamSet</a> streamSet;</div><div class="line">   <a class="code" href="classastra_1_1_stream_reader.html">astra::StreamReader</a> reader = streamSet.create_reader();</div><div class="line"></div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga154632f199b1df85a9fc90687205f4fe">astra::terminate</a>();</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><ul>
<li>Line 11 - Creates a <code>StreamReader</code></li>
</ul>
<ol type="1">
<li>Next we start the depth stream using the <code>StreamReader</code> that we created in the previous step. Starting the depth stream tells <a class="el" href="namespace_astra.html">Astra</a> that we're interested in getting depth data from our <code>StreamSet</code>.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga75bdfca558a77a83cfe142596a81f859">astra::initialize</a>();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_stream_set.html">astra::StreamSet</a> streamSet;</div><div class="line">   <a class="code" href="classastra_1_1_stream_reader.html">astra::StreamReader</a> reader = streamSet.create_reader();</div><div class="line"></div><div class="line">   reader.stream&lt;<a class="code" href="classastra_1_1_depth_stream.html">astra::DepthStream</a>&gt;().start();</div><div class="line"></div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga154632f199b1df85a9fc90687205f4fe">astra::terminate</a>();</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><ul>
<li>Line 13 - Starts the depth stream</li>
</ul>
<ol type="1">
<li>With our depth stream stared, let's pull the latest depth frame from our depth stream. To do this, we'll need to first retrieve the latest <code>Frame</code> through our <code>StreamReader</code>, then call <code>get&lt;T&gt;</code> to get the depth frame data from our frame.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga75bdfca558a77a83cfe142596a81f859">astra::initialize</a>();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_stream_set.html">astra::StreamSet</a> streamSet;</div><div class="line">   <a class="code" href="classastra_1_1_stream_reader.html">astra::StreamReader</a> reader = streamSet.create_reader();</div><div class="line"></div><div class="line">   reader.stream&lt;<a class="code" href="classastra_1_1_depth_stream.html">astra::DepthStream</a>&gt;().start();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_frame.html">astra::Frame</a> frame = reader.get_latest_frame();</div><div class="line">   <span class="keyword">const</span> <span class="keyword">auto</span> depthFrame = frame.get&lt;<a class="code" href="classastra_1_1_depth_frame.html">astra::DepthFrame</a>&gt;();</div><div class="line"></div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga154632f199b1df85a9fc90687205f4fe">astra::terminate</a>();</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><ul>
<li>Line 15 - Retrieves the latest frame</li>
<li>Line 16 - Gets the depth frame from the latest frame</li>
</ul>
<ol type="1">
<li>The only remaining task is to print some data from the depth frame that we just retrieved.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga75bdfca558a77a83cfe142596a81f859">astra::initialize</a>();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_stream_set.html">astra::StreamSet</a> streamSet;</div><div class="line">   <a class="code" href="classastra_1_1_stream_reader.html">astra::StreamReader</a> reader = streamSet.create_reader();</div><div class="line"></div><div class="line">   reader.stream&lt;<a class="code" href="classastra_1_1_depth_stream.html">astra::DepthStream</a>&gt;().start();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_frame.html">astra::Frame</a> frame = reader.get_latest_frame();</div><div class="line">   <span class="keyword">const</span> <span class="keyword">auto</span> depthFrame = frame.get&lt;<a class="code" href="classastra_1_1_depth_frame.html">astra::DepthFrame</a>&gt;();</div><div class="line"></div><div class="line">   <span class="keyword">const</span> <span class="keywordtype">int</span> frameIndex = depthFrame.<a class="code" href="classastra_1_1_image_frame.html#a7c1a9a05070e8272107caf4d592af7c8">frame_index</a>();</div><div class="line">   <span class="keyword">const</span> <span class="keywordtype">short</span> pixelValue = depthFrame.data()[0];</div><div class="line"></div><div class="line">   std::cout &lt;&lt; std::endl</div><div class="line">             &lt;&lt; <span class="stringliteral">&quot;Depth frameIndex: &quot;</span> &lt;&lt; frameIndex</div><div class="line">             &lt;&lt; <span class="stringliteral">&quot; pixelValue: &quot;</span> &lt;&lt; pixelValue</div><div class="line">             &lt;&lt; std::endl</div><div class="line">             &lt;&lt; std::endl;</div><div class="line"></div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga154632f199b1df85a9fc90687205f4fe">astra::terminate</a>();</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><ul>
<li>Line 18 - Gets a copy of the frame index from our depth frame</li>
<li>Line 19 - Gets a copy of the value within the first pixel of our depth frame's data</li>
<li>Line 21-25 - Prints the two aforementioned values to the console</li>
<li>Line 27-28 - Pauses execution so we can soak in our success</li>
</ul>
<p>You can go ahead and run your application now to test that everything works. Just like before, a console window should pop up and display diagnostic information. Then, you should see a line with the frame data that we retrieved. Press enter when you're done.</p>
<p>You just retrieved your first frame from Astra! There's one more task before you graduate from our <a class="el" href="namespace_astra.html">Astra</a> crash course, and that's working with a sequence of frames.</p>
<h1><a class="anchor" id="consuming_sec"></a>
Consuming a StreamSet stream</h1>
<p>Now that you know how to create a <code>StreamReader</code> and get a frame from it, you're ready to work with a stream of frames. To do this, we only need to make a small change and loop over our call to the <code>StreamReader</code>'s <code>get_latest_frame</code> function. In this particular case, we're going to get the first 100 frames from our depth stream and print the value of each frame's first pixel to the console.</p>
<p>The following code is highly similar to the code from our last example, except we've added a <code>do while</code> loop around our frame processing code, in addition to some variables that store the number of times we've looped and the maximum number of frames we want to process.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga75bdfca558a77a83cfe142596a81f859">astra::initialize</a>();</div><div class="line"></div><div class="line">   <a class="code" href="classastra_1_1_stream_set.html">astra::StreamSet</a> streamSet;</div><div class="line">   <a class="code" href="classastra_1_1_stream_reader.html">astra::StreamReader</a> reader = streamSet.create_reader();</div><div class="line"></div><div class="line">   reader.stream&lt;<a class="code" href="classastra_1_1_depth_stream.html">astra::DepthStream</a>&gt;().start();</div><div class="line"></div><div class="line">   <span class="keyword">const</span> <span class="keywordtype">int</span> maxFramesToProcess = 100;</div><div class="line">   <span class="keywordtype">int</span> count = 0;</div><div class="line"></div><div class="line">   <span class="keywordflow">do</span> {</div><div class="line">      <a class="code" href="classastra_1_1_frame.html">astra::Frame</a> frame = reader.get_latest_frame();</div><div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span> depthFrame = frame.get&lt;<a class="code" href="classastra_1_1_depth_frame.html">astra::DepthFrame</a>&gt;();</div><div class="line"></div><div class="line">      <span class="keyword">const</span> <span class="keywordtype">int</span> frameIndex = depthFrame.<a class="code" href="classastra_1_1_image_frame.html#a7c1a9a05070e8272107caf4d592af7c8">frame_index</a>();</div><div class="line">      <span class="keyword">const</span> <span class="keywordtype">short</span> pixelValue = depthFrame.data()[0];</div><div class="line"></div><div class="line">      std::cout &lt;&lt; std::endl</div><div class="line">                &lt;&lt; <span class="stringliteral">&quot;Depth frameIndex: &quot;</span> &lt;&lt; frameIndex</div><div class="line">                &lt;&lt; <span class="stringliteral">&quot; pixelValue: &quot;</span> &lt;&lt; pixelValue</div><div class="line">                &lt;&lt; std::endl</div><div class="line">                &lt;&lt; std::endl;</div><div class="line"></div><div class="line">      count++;</div><div class="line">   } <span class="keywordflow">while</span> (count &lt; maxFramesToProcess);</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;Press any key to continue...&quot;</span>;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <a class="code" href="group__cpp__core__api__ref.html#ga154632f199b1df85a9fc90687205f4fe">astra::terminate</a>();</div><div class="line"></div><div class="line">   std::cout &lt;&lt; <span class="stringliteral">&quot;hit enter to exit program&quot;</span> &lt;&lt; std::endl;</div><div class="line">   std::cin.get();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><ul>
<li>Line 15 - Stores the maximum number of frames we're going to process in the loop</li>
<li>Line 16 - Sentinel to count the number of frames that we've processed</li>
<li>Line 18-32 - The frame processing loop</li>
</ul>
<p>Compile and run. While the program is running and the <a class="el" href="namespace_astra.html">Astra</a> is focused on you, move around a bit and watch the data values on the frames change.</p>
<p>Achievement get! You've just made your first <a class="el" href="namespace_astra.html">Astra</a> application! If you haven't had your fill of fun with <a class="el" href="namespace_astra.html">Astra</a> yet, continue on to our Simple Depth Viewer Tutorial. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
  <strong>© 2019 <a href="https://orbbec3d.com/">Orbbec 3D</a></strong> All Rights Reserved.
</small></address>
</body>
</html>
